---
redir-port: 7892
port: 7890
socks-port: 7891
mixed-port: 7893
mode: rule
log-level: silent
allow-lan: true
external-controller: 0.0.0.0:9090
secret: '123456'
bind-address: "*"
external-ui: "/usr/share/openclash/dashboard"
unified-delay: true
#dns:
#  enable: true
#  listen: 127.0.0.1:7874
#  enhanced-mode: redir-host
#  nameserver:
#  - https://dns.cloudflare.com/dns-query
#  ipv6: false
#tun:
#  enable: true
#  stack: system
#  dns-hijack:
#  - tcp://8.8.8.8:53
#  - tcp://8.8.4.4:53
tun:
  enable: true
  stack: gvisor #  only gvisor
  dns-hijack: 
    - 0.0.0.0:53 # additional dns server listen on TUN
#  auto-route: true # auto set global route
dns:
  enable: true
  use-hosts: true
  ipv6: false
  enhanced-mode: redir-host
  fake-ip-range: 198.18.0.1/16
  listen: 127.0.0.1:6868
  default-nameserver:
    - 127.0.0.1:53
    - 8.8.8.8
    - 8.8.4.4
  nameserver:
    - 'https://dns.cloudflare.com/dns-query#DNS'
  fallback:
    - 'https://1.0.0.1/dns-query#DNS'  # append the proxy adapter name or group name to the end of DNS URL with '#' prefix.
    - 'https://dns.cloudflare.com/dns-query#DNS'
    - 'tls://8.8.4.4:853#DNS'
  fallback-filter:
    geoip: false
    geosite:
      - gfw  # `geosite` filter only use fallback server to resolve ip, prevent DNS leaks to unsafe DNS providers.
    domain:
      - +.example.com
    ipcidr:
      - 0.0.0.0/32
proxy-providers:
  CDN:
    type: file
    path: "./proxy_provider/cdn.yaml"
    health-check:
      enable: true
      url: https://cp.cloudflare.com/generate_204
      interval: 60
proxy-groups:
- name: Proxy
  type: select
  proxies:
  - "Best Ping ü§ñ"
  use:
  - CDN
- name: "Best Ping ü§ñ"
  type: url-test
  use:
  - CDN
  url: https://cp.cloudflare.com/generate_204
  interval: 300
- name: "Game üéÆ"
  type: select
  proxies:
  - "Best Ping ü§ñ"
  use:
  - CDN
- name: "‚õîÔ∏è AdBlock ‚õîÔ∏è"
  type: select
  proxies:
  - REJECT
  - DIRECT
  - Proxy
- name: DNS
  type: select
  proxies:
  - "Best Ping ü§ñ"
  use:
  - CDN
  url: http://cp.cloudflare.com
  interval: 180
  lazy: true
- name: "\U0001F3AFOthers"
  type: select
  proxies:
  - Proxy
  - DIRECT
rules:
- DOMAIN-KEYWORD,announce,DIRECT,no-resolve
- DOMAIN-KEYWORD,torrent,DIRECT,no-resolve
- DOMAIN-KEYWORD,tracker,DIRECT,no-resolve
- DOMAIN-SUFFIX,smtp,DIRECT,no-resolve
- DOMAIN-SUFFIX,local,DIRECT,no-resolve
- IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
- IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
- IP-CIDR6,::1/128,DIRECT,no-resolve
- IP-CIDR,198.18.0.1/16,REJECT,no-resolve
- RULE-SET,AdBlock,‚õîÔ∏è AdBlock ‚õîÔ∏è
- RULE-SET,rule_portgames,Game üéÆ
- RULE-SET,rule_games,Game üéÆ
- RULE-SET,rule_gaming,Game üéÆ
- "MATCH,\U0001F3AFOthers"
rule-providers:
  rule_games:
    type: file
    behavior: domain
    path: "./rule_provider/rule_games.yaml"
    interval: 6990
  rule_gaming:
    type: file
    behavior: classical
    path: "./rule_provider/rule_gaming.yaml"
    interval: 6990
  rule_portgames:
    type: file
    behavior: classical
    path: "./rule_provider/rule_portgames.yaml"
    interval: 6990
  AdBlock:
    type: file
    behavior: classical
    path: "./rule_provider/‚ùåAdBlock.yaml"
    interval: 86400
profile:
  store-selected: true
